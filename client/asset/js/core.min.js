var mapincGoogleMap = []
var mapincColorMain1 = '#00AFEF'
var mapincColorMain2 = '#91D8F7'
var storageName = 'mapinc.storage'

function guidGenerator(){
  var S4 = function(){
    return (((1+Math.random())*0x10000)|0).toString(16).substring(1)
  }
  return (S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4())
}

function initInput(){
  $.each($(".input-group.transparent .form-control, .form-control.transparent"), function(){
    $(this).on("change", function(){
      if(!_.isEmpty($(this).val().trim())) $(this).addClass("filled")
      else $(this).removeClass("filled")
    })
  })
}

function doSignout(){
  localStorage.removeItem(storageName)
  window.location.href = 'p.signin.html'
}

function initPage(){
  $("body").animate({
    opacity: 1
  }, 200)
}

function verify(callback, condition, redirect = false){
  $.post({
    url: 'http://localhost:9000/verify',
    data: {
      'token': localStorage.getItem(storageName)
    },
    complete: function(xhr, textStatus) {
      if(xhr.status == 403 && !condition && redirect) window.location.href = redirect
      else if(xhr.status == 200 && condition && redirect) window.location.href = redirect
      else {
        initPage()
        callback
      }
    }
  })
}

$(function(){
  initInput()
})
